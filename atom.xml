<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://lijunjie.me</id>
    <title>Gridea</title>
    <updated>2022-05-23T08:21:13.325Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://lijunjie.me"/>
    <link rel="self" href="https://lijunjie.me/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://lijunjie.me/images/avatar.png</logo>
    <icon>https://lijunjie.me/favicon.ico</icon>
    <rights>All rights reserved 2022, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[python + Mysql断连]]></title>
        <id>https://lijunjie.me/post/python-mysql-duan-lian/</id>
        <link href="https://lijunjie.me/post/python-mysql-duan-lian/">
        </link>
        <updated>2022-05-23T08:13:22.000Z</updated>
        <content type="html"><![CDATA[<h1 id="python-mysql断连">python + Mysql断连</h1>
<p>前言：项目爬取南昌市政务服务网站事项信息，写入数据库，导致使用python链接mySQL时出现超时，断连问题。</p>
<p><strong>报错信息：</strong></p>
<pre><code class="language-python">Can't connect to MySQL server on '58.223.177.201' (timed out)
</code></pre>
<p><strong>解决方案：</strong></p>
<ul>
<li>可能因为网络不稳定导致数据库断连</li>
<li>给插入SQL添加 Try-Except</li>
</ul>
<hr>
<pre><code class="language-python">def INSERT_SQL(sql_str):
    db = pymysql.connect(host=&quot;xxxxxxxxx&quot;, port=8081, user=&quot;visitor&quot;, passwd=&quot;visitors@Zgy2021&quot;,
                         db=&quot;ods_policy_rpa&quot;, charset='utf8')
    cur = db.cursor()
    xerr = &quot;&quot;
    try:
        cur.execute(sql_str)
        db.commit()
        print(&quot;提交成功！！！&quot;)
    except Exception as e:
        db.rollback()
        print(e)
        xerr =  e
    cur.close()
    db.close()
    return xerr
</code></pre>
<p>给插入代码添加重连机制，断连后重新链接Mysql</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Second]]></title>
        <id>https://lijunjie.me/post/second/</id>
        <link href="https://lijunjie.me/post/second/">
        </link>
        <updated>2022-05-23T08:01:49.000Z</updated>
        <content type="html"><![CDATA[<p>你好！</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[## OnePage]]></title>
        <id>https://lijunjie.me/post/onepage/</id>
        <link href="https://lijunjie.me/post/onepage/">
        </link>
        <updated>2022-05-23T07:47:47.000Z</updated>
        <content type="html"><![CDATA[<p>Hi</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[1111]]></title>
        <id>https://lijunjie.me/post/1111/</id>
        <link href="https://lijunjie.me/post/1111/">
        </link>
        <updated>2022-05-23T02:18:03.000Z</updated>
        <content type="html"><![CDATA[<p>1111111111111111111<img src="https://lijunjie.me/post-images/1653272292630.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
</feed>